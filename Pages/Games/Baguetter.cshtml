@page
@namespace fictionsplash.Pages.Games
@model Games.BaguetterModel


<body class="UPG-background">
</body>


<script src="https://pixijs.download/release/pixi.js"></script>
<script>
    let app = new PIXI.Application({width: 640, height: 360});
    document.body.appendChild(app.view);
    console.log('window loaded')

    let sprite = PIXI.Sprite.from('../../baguette.png');
    app.stage.addChild(sprite);
    console.log('sprite loaded')

    speed = 15;

    let elapsed = 0.0;
    var events = [];
    document.addEventListener('keydown', event => {
        events.push(event)
    })
    
    app.ticker.add((delta) => {
        elapsed += delta;

        if(events.length > 0)
        {
            BaguetteDo(events.pop());
        }
    })

    const W_KEY = 87
    const S_KEY = 83
    const D_KEY = 68
    const A_KEY = 65
    const UP_ARROW = 38
    const DOWN_ARROW = 40
    const RIGHT_ARROW = 39
    const LEFT_ARROW = 37
    const SPACE_KEY = 32
    
    function BaguetteDo(event){
        switch(event.keyCode){
            case D_KEY || RIGHT_ARROW:
                sprite.x += speed
                break;
            
            case A_KEY || LEFT_ARROW:
                sprite.x -= speed
                break;

            case SPACE_KEY:
                console.log('Shooting')
                break;
        }

    }
</script>